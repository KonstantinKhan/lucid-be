# File Locations Guide

[‚Üê Back to CLAUDE.md](../../CLAUDE.md)

Quick reference for where different types of files belong in the lucid-be project.

## Application Code (ktor-app module)

### Entry Point
- **Location**: `lucid-be-ktor-app/src/main/kotlin/Application.kt`
- **Purpose**: Main application entry point, module configuration sequence

### Configuration Files
- **Location**: `lucid-be-ktor-app/src/main/kotlin/{Feature}.kt`
- **Examples**:
  - `HTTP.kt` - CORS and default headers
  - `Serialization.kt` - JSON content negotiation
  - `Databases.kt` - Database setup
  - `Routing.kt` - API endpoint definitions

### Mappers
- **Location**: `lucid-be-ktor-app/src/main/kotlin/com/khan366kos/mappers/`
- **Pattern**: `{Entity}Mappers.kt`
- **Example**: `TaskMappers.kt`
- **Purpose**: Convert between domain and transport models

## Domain Models (common module)

### Location
- **Path**: `lucid-be-common/src/main/kotlin/com/khan366kos/common/model/`

### Patterns
- **One file per class/enum**
- **File naming**: `{Entity}.kt`, `{Entity}Status.kt`
- **Examples**: `Task.kt`, `TaskStatus.kt`

### Characteristics
- Immutable data classes with `val` properties
- Domain validation in `init` blocks
- `@Serializable` annotation (kotlinx.serialization)
- `kotlinx.datetime.Instant` for timestamps

## Transport Models (transport-openapi module)

### Generated Code
- **Location**: `lucid-be-transport-openapi/build/generated/openapi/`
- **Package**: `com.khan366kos.transport.model`
- **Note**: Auto-generated, not version controlled
- **Regenerate**: `./gradlew :lucid-be-transport-openapi:build`

### Source Specifications
- **Location**: `specs/` directory (modular YAML files)
- **Entry point**: `specs/openapi.yaml`
- **Structure**:
  - `specs/domains/` - Domain-specific paths
  - `specs/components/schemas/` - Reusable schemas
  - `specs/components/parameters/` - Reusable parameters
  - `specs/components/responses/` - Reusable responses

See [API Specification](../api_description.md) for details.

## Tests

### Location Pattern
- **Mirror structure**: `src/test/kotlin/` mirrors `src/main/kotlin/`
- **Example**:
  - Source: `lucid-be-common/src/main/kotlin/com/khan366kos/common/model/Task.kt`
  - Test: `lucid-be-common/src/test/kotlin/com/khan366kos/common/model/TaskTest.kt`

### Naming Convention
- **Pattern**: `{Class}Test.kt`
- **Examples**: `TaskTest.kt`, `TaskMappersTest.kt`

## Configuration Files

### Application Configuration
- **Location**: `lucid-be-ktor-app/src/main/resources/application.conf`
- **Format**: HOCON (Human-Optimized Config Object Notation)
- **Contents**: Server port, database connection, environment settings

### Logging Configuration
- **Location**: `lucid-be-ktor-app/src/main/resources/logback.xml`
- **Purpose**: Logging levels and output configuration

### OpenAPI Specifications
- **Location**: `specs/` directory
- **Format**: Modular YAML files
- **Bundled output**: `specs/bundled-openapi.yaml` (generated, not version controlled)

## Package Naming Conventions

### Root Package
- `com.khan366kos` - Base package for all project code

### Module-Specific Packages

**ktor-app module:**
- `com.khan366kos` - Main application, configuration files (no sub-package)
- `com.khan366kos.mappers` - Mapper functions

**transport-openapi module:**
- `com.khan366kos.transport.model` - Generated transport models
- `com.khan366kos.transport.openapi` - OpenAPI configuration

**common module:**
- `com.khan366kos.common.model` - Domain entities
- `com.khan366kos.common.validation` - (Future) Validation utilities
- `com.khan366kos.common.error` - (Future) Domain exceptions

## Build Artifacts

### Generated Code
- **Status**: Not version controlled
- **Regeneration**: Automatic on build
- **Locations**:
  - `build/` directories in each module
  - `lucid-be-transport-openapi/build/generated/openapi/`

### Bundled OpenAPI Specification
- **Location**: `specs/bundled-openapi.yaml`
- **Status**: Generated by @redocly/cli, not version controlled
- **Purpose**: Single-file spec for OpenAPI Generator input

## Quick Reference Table

| File Type          | Module            | Location                    | Naming Pattern                 |
|--------------------|-------------------|-----------------------------|--------------------------------|
| Domain model       | common            | `.../common/model/`         | `{Entity}.kt`                  |
| Domain enum        | common            | `.../common/model/`         | `{Entity}Status.kt`            |
| Transport model    | transport-openapi | `build/generated/openapi/`  | Generated by OpenAPI Generator |
| Mapper             | ktor-app          | `.../mappers/`              | `{Entity}Mappers.kt`           |
| Config feature     | ktor-app          | `src/main/kotlin/`          | `{Feature}.kt`                 |
| Route handler      | ktor-app          | `src/main/kotlin/`          | `Routing.kt`                   |
| Test               | any module        | mirror `main` in `test`     | `{Class}Test.kt`               |
| API path spec      | root              | `specs/domains/`            | `{resource}.yaml`              |
| API schema         | root              | `specs/components/schemas/` | `{entity}.yaml`                |
| Application config | ktor-app          | `src/main/resources/`       | `application.conf`             |
| Logging config     | ktor-app          | `src/main/resources/`       | `logback.xml`                  |

## See Also

- [Development Guide](../development-guide.md) - How to create and work with files
- [Conventions Guide](./conventions.md) - Coding standards and patterns
- [CLAUDE.md](../../CLAUDE.md) - Project navigation hub
- [Module Documentation](../modules/) - Detailed module information